{% extends "leettracker/layout.html" %}
{% load static %}

{% block javascript %}
<script src="{% static 'leettracker/myproblems.js' %}"></script>
{% endblock %}

{% block body %}
<div id="main-content">
    <h2>Problems for Topic: {{ topic.name }}</h2>

    <!-- Filter and Sort Section -->
    <div class="filter-sort-section">
        <select id="filter-difficulty" class="form-control-myproblems">
            <option value="">All Difficulties</option>
            <option value="Easy">Easy</option>
            <option value="Medium">Medium</option>
            <option value="Hard">Hard</option>
        </select>
        <select id="filter-solved" class="form-control-myproblems">
            <option value="">All Statuses</option>
            <option value="True">Solved</option>
            <option value="False">Unsolved</option>
        </select>
        <button id="filter-button" class="btn btn-secondary-myproblems">Filter</button>

        <select id="sort-option" class="form-control-myproblems">
            <option value="number">Problem Number</option>
            <option value="name">Problem Name</option>
        </select>
        <button id="sort-button" class="btn btn-secondary-myproblems">Sort</button>
    </div>

    {% if problems %}
        <table class="table" id="problems-table">
            <thead>
                <tr>
                    <th>Problem Number</th>
                    <th>Problem Name</th>
                    <th>Difficulty</th>
                    <th>Solved</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for problem in problems %}
                <tr id="problem-{{ problem.id }}">
                    <td>{{ problem.problem_number }}</td>
                    <td><a href="{% url 'displayproblem' problem.id %}">{{ problem.problem_name }}</a></td>
                    <td>{{ problem.difficulty }}</td>
                    <td>
                        {% if problem.status %}
                        <span class="green-check">&#10004;</span> <!-- Green check mark -->
                        {% else %}
                        <span class="red-cross">&#10008;</span> <!-- Red cross mark -->
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'editproblem' problem.id %}" class="btn btn-sm">Edit</a>
                        <button class="btn btn-danger btn-sm" onclick="deleteProblem({{ problem.id }})">Delete</button>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">No problems have been added yet.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No problems available for this topic.</p>
    {% endif %}
</div>
{% endblock %}