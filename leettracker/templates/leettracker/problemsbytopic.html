{% extends "leettracker/layout.html" %}
{% load static %}

{% block javascript %}
<script src="{% static 'leettracker/problemlistfunctions.js' %}"></script>
{% endblock %}

{% block body %}
<style>
    .btn-secondary {
        background-color: #f3fe53;
        border-color: #f3fe53;
        color: #333;
        border-radius: 20px;
        padding: 5px 10px;
        margin: 5px 5px;
    }

    .form-control {
        background-color: #444;
        color: white;
        border-radius: 20px;
        border: 1px solid #ccc;
        padding: 5px 10px;
        margin-left: 5px;
        margin-right: 5px;
    }

    .form-control:hover, .form-control:focus, .btn-secondary:hover, .btn-secondary:focus {
        background-color: #333333;
        border-color: #333333;
        color: white;
    }

    .table th {
        font-size: larger;
    }

    .filter-sort-section {
        margin-bottom: 20px;
        display: flex;
        align-items: center; /* Align items vertically */
    }
</style>

<div id="main-content">
    <h2>Problems for Topic: {{ topic.name }}</h2>

    <!-- Filter and Sort Section -->
    <div class="filter-sort-section" style="margin-bottom: 20px;">
        <select id="filter-difficulty" class="form-control" style="display: inline-block; width: auto;">
            <option value="">All Difficulties</option>
            <option value="Easy">Easy</option>
            <option value="Medium">Medium</option>
            <option value="Hard">Hard</option>
        </select>
        <select id="filter-solved" class="form-control" style="display: inline-block; width: auto;">
            <option value="">All Statuses</option>
            <option value="True">Solved</option>
            <option value="False">Unsolved</option>
        </select>
        <button id="filter-button" class="btn btn-secondary" style="margin-right: 100px;">Filter</button>

        <select id="sort-option" class="form-control" style="display: inline-block; width: auto;">
            <option value="number">Problem Number</option>
            <option value="name">Problem Name</option>
        </select>
        <button id="sort-button" class="btn btn-secondary">Sort</button>
    </div>

    {% if problems %}
        <table class="table" id="problems-table">
            <thead>
                <tr>
                    <th>Problem Number</th>
                    <th>Problem Name</th>
                    <th>Difficulty</th>
                    <th>Solved</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for problem in problems %}
                <tr id="problem-{{ problem.id }}">
                    <td>{{ problem.problem_number }}</td>
                    <td><a href="{% url 'displayproblem' problem.id %}">{{ problem.problem_name }}</a></td>
                    <td>{{ problem.difficulty }}</td>
                    <td>
                        {% if problem.status %}
                        <span style="color: green;">&#10004;</span> <!-- Green check mark -->
                        {% else %}
                        <span style="color: red;">&#10008;</span> <!-- Red cross mark -->
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'editproblem' problem.id %}" class="btn btn-warning btn-sm">Edit</a>
                        <button class="btn btn-danger btn-sm" onclick="deleteProblem({{ problem.id }})">Delete</button>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">No problems have been added yet.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No problems available for this topic.</p>
    {% endif %}
</div>
{% endblock %}