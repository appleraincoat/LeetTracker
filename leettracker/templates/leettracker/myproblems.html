{% extends "leettracker/layout.html" %}
{% load static %}

{% block javascript %}
<script src="{% static 'leettracker/problemlistfunctions.js' %}"></script>
{% endblock %}


{% block body %}
<div id="main-content">
    <h1>Saved LeetCode Problems</h1>

    <!-- Filter and Sort Section -->
    <div class="filter-sort-section">
        <select id="filter-difficulty" class="form-control-myproblems">
            <option value="">All Difficulties</option>
            <option value="Easy">Easy</option>
            <option value="Medium">Medium</option>
            <option value="Hard">Hard</option>
        </select>
        <select id="filter-solved" class="form-control-myproblems">
            <option value="">All Statuses</option>
            <option value="True">Solved</option>
            <option value="False">Unsolved</option>
        </select>
        <button id="filter-button" class="btn btn-secondary-myproblems">Filter</button>

        
        <select id="sort-option" class="form-control-myproblems">
            <option value="number">Problem Number</option>
            <option value="name">Problem Name</option>
        </select>
        <button id="sort-button" class="btn btn-secondary-myproblems">Sort</button>
    </div>

    <table class="table" id="problems-table">
        <thead>
            <tr>
                <th>Problem Number</th>
                <th>Problem Name</th>
                <th>Difficulty</th>
                <th>Solved</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for problem in problems %}
            <tr id="problem-{{ problem.id }}">
                <td>{{ problem.problem_number }}</td>
                <td><a href="{% url 'displayproblem' problem.id %}">{{ problem.problem_name }}</a></td>
                <td>{{ problem.difficulty }}</td>
                <td>
                    {% if problem.status %}
                    <span style="color: green;">&#10004;</span> 
                    {% else %}
                    <span style="color: red;">&#10008;</span> 
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'editproblem' problem.id %}" class="btn btn-sm" id="editbutton">Edit</a>
                    <button class="btn btn-danger btn-sm" id="deletebutton" onclick="deleteProblem({{ problem.id }})">Delete</button>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">No problems have been added yet.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}