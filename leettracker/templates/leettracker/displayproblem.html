{% extends "leettracker/layout.html" %}
{% load static %}

{% block javascript %}
<script src="{% static 'leettracker/displayproblem.js' %}"></script>
<script src="{% static 'leettracker/index.js' %}"></script>
<script src="{% static 'leettracker/dropdown.js' %}"></script>
{% endblock %}

{% block body %}
<div id="main-content-displayproblem">
    <!-- Solved/Unsolved Status -->
    <div class="solved-status">
        {% if problem.status %}
        <span class="solved">Solved <span>✔</span></span>
        {% else %}
        <span class="unsolved">Unsolved <span>✘</span></span>
        {% endif %}
    </div>

    <h1>{{ problem.problem_number }}. {{ problem.problem_name }}</h1>
    <div class="difficulty">
        {% if problem.get_difficulty_display == "Easy" %}
        <span class="easy">{{ problem.get_difficulty_display }}</span>
        {% elif problem.get_difficulty_display == "Medium" %}
        <span class="medium">{{ problem.get_difficulty_display }}</span>
        {% elif problem.get_difficulty_display == "Hard" %}
        <span class="hard">{{ problem.get_difficulty_display }}</span>
        {% endif %}
    </div>

    <div id="topics-dropdown-box" class="dropdown">
        <span>Topics &#9660;</span>
        <div id="topics-dropdown-content" class="dropdown-content">
            {% for topic in problem.topics.all %}
            <a href="{% url 'problemsbytopic' topic.id %}" class="tag" id="tag-displayproblem">{{ topic.name }}</a>
            {% endfor %}
        </div>
    </div>

    <p><a href="{{ problem.problem_link }}" target="_blank" class="problem-link"><strong>Link to Problem</strong></a></p>
    
    <h2>Solution</h2>
    <pre class="solution">{{ problem.solution }}</pre>
    
    {% if problem.notes %}
    <h2>Notes</h2>
    <pre class="notes">{{ problem.notes }}</pre>
    {% endif %}
    
    <h2>Complexity</h2>
    <div class="complexity">
        <p><strong>Time Complexity:</strong> {{ problem.time_complexity }}</p>
        <p><strong>Space Complexity:</strong> {{ problem.space_complexity }}</p>
    </div>
    <div class="actions">
        <a href="{% url 'editproblem' problem.id %}" class="btn btn-warning-displayproblem">Edit</a>
        <form method="post" action="{% url 'deleteproblem' problem.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger-displayproblem" onclick="return confirm('Are you sure you want to delete this problem?');">Delete</button>
        </form>
    </div>
</div>
{% endblock %}